{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/classe.service\";\nimport * as i2 from \"src/app/attendance.service\";\nimport * as i3 from \"src/app/user-service.service\";\nconst _c0 = function () {\n  return {\n    standalone: true\n  };\n};\nfunction AttEmpComponent_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 7)(1, \"th\", 8);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"slice\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\", 9);\n    i0.ɵɵelement(5, \"img\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 9);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 9);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 9)(11, \"div\", 11)(12, \"div\", 12)(13, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function AttEmpComponent_tr_15_Template_input_ngModelChange_13_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const employee_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.selectedStatus[employee_r1._id] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"label\", 14);\n    i0.ɵɵtext(15, \"P\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 12)(17, \"input\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function AttEmpComponent_tr_15_Template_input_ngModelChange_17_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const employee_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.selectedStatus[employee_r1._id] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"label\", 14);\n    i0.ɵɵtext(19, \"L\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 12)(21, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function AttEmpComponent_tr_15_Template_input_ngModelChange_21_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const employee_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.selectedStatus[employee_r1._id] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"label\", 14);\n    i0.ɵɵtext(23, \"A\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const employee_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(3, 18, employee_r1._id, 1, 8), \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", employee_r1.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", employee_r1.role, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate(\"id\", \"radio-\" + employee_r1._id);\n    i0.ɵɵpropertyInterpolate(\"name\", \"radio-group-\" + employee_r1._id);\n    i0.ɵɵproperty(\"ngModelOptions\", i0.ɵɵpureFunction0(22, _c0))(\"ngModel\", ctx_r0.selectedStatus[employee_r1._id]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"for\", \"radio-\" + employee_r1._id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"id\", \"radio-2-\" + employee_r1._id);\n    i0.ɵɵpropertyInterpolate(\"name\", \"radio-group-\" + employee_r1._id);\n    i0.ɵɵproperty(\"ngModelOptions\", i0.ɵɵpureFunction0(23, _c0))(\"ngModel\", ctx_r0.selectedStatus[employee_r1._id]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"for\", \"radio-2-\" + employee_r1._id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"id\", \"radio-3-\" + employee_r1._id);\n    i0.ɵɵpropertyInterpolate(\"name\", \"radio-group-\" + employee_r1._id);\n    i0.ɵɵproperty(\"ngModelOptions\", i0.ɵɵpureFunction0(24, _c0))(\"ngModel\", ctx_r0.selectedStatus[employee_r1._id]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"for\", \"radio-3-\" + employee_r1._id);\n  }\n}\nexport class AttEmpComponent {\n  constructor(Cla, att, userService) {\n    this.Cla = Cla;\n    this.att = att;\n    this.userService = userService;\n    this.employees = [];\n    this.selectedStatus = {};\n  }\n  ngOnInit() {\n    this.userService.getStudent().subscribe(data => {\n      // Filter users by role 'student'\n      this.employees = data.filter(user => user.role !== 'Student');\n      console.log(this.employees);\n      //this.filteredList=[...this.employees]\n    });\n  }\n\n  onAdd() {\n    // console.log('Before loop: selectedStatus', this.selectedStatus);\n    for (const studentId of Object.keys(this.selectedStatus)) {\n      const status = this.selectedStatus[studentId];\n      // Now you can use studentId and status in your loop\n      //console.log(`Student ID: ${studentId}, Status: ${status}`);\n      // Check if both studentId and status are defined\n      if (studentId && status) {\n        // Create an attendance object based on the selected data\n        const attendanceData = {\n          iduser: studentId,\n          status: status\n        };\n        //console.log('Sending attendanceData', attendanceData);\n        // Send the attendance data for this student\n        this.att.createAttendance(attendanceData).subscribe(response => {\n          // Handle the response from the API if needed\n          console.log('API response:', response);\n        });\n      } else {\n        // console.error('Both studentId and status must be provided for each student.');\n      }\n    }\n    //console.log('After loop');\n  }\n}\n_class = AttEmpComponent;\n_class.ɵfac = function AttEmpComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ClasseService), i0.ɵɵdirectiveInject(i2.AttendanceService), i0.ɵɵdirectiveInject(i3.UserServiceService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-att-emp\"]],\n  decls: 19,\n  vars: 1,\n  consts: [[1, \"flex\", \"justify-center\", \"overflow-x-auto\", \"mt-4\"], [1, \"w-92\", \"text-sm\", \"text-left\", \"text-gray-500\"], [1, \"text-xs\", \"text-black\", \"uppercase\", \"bg-slate-200\"], [\"scope\", \"col\", 1, \"px-6\", \"py-3\"], [\"class\", \" border-b \", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"items-center\", \"justify-center\", \"mt-8\"], [\"type\", \"button\", 1, \"text-white\", \"bg-[#4285F4]\", \"hover:bg-[#4285F4]/90\", \"focus:ring-4\", \"focus:outline-none\", \"focus:ring-[#4285F4]/50\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"px-5\", \"py-2.5\", \"text-center\", \"inline-flex\", \"items-center\", \"dark:focus:ring-[#4285F4]/55\", \"mr-2\", \"mb-2\", 3, \"click\"], [1, \"border-b\"], [\"scope\", \"row\", 1, \"px-6\", \"py-4\", \"font-medium\", \"whitespace-nowrap\", \"text-black\"], [1, \"px-6\", \"py-4\"], [\"src\", \"assets/images/avatar.png\", \"alt\", \"Rounded avatar\", 1, \"w-10\", \"h-10\", \"rounded-full\"], [1, \"flex\"], [1, \"flex\", \"items-center\", \"mr-4\"], [\"type\", \"radio\", \"value\", \"Present\", 1, \"w-4\", \"h-4\", \"text-blue-600\", \"bg-gray-100\", \"border-gray-300\", \"focus:ring-blue-500\", \"dark:focus:ring-blue-600\", 3, \"ngModelOptions\", \"ngModel\", \"id\", \"name\", \"ngModelChange\"], [1, \"ml-2\", \"text-sm\", \"font-medium\", \"text-gray-900\", \"dark:text-gray-300\", 3, \"for\"], [\"type\", \"radio\", \"value\", \"Late\", 1, \"w-4\", \"h-4\", \"text-gray-600\", \"bg-gray-100\", \"border-gray-300\", \"focus:ring-gray-500\", \"dark:focus:ring-blue-600\", 3, \"ngModelOptions\", \"ngModel\", \"id\", \"name\", \"ngModelChange\"], [\"type\", \"radio\", \"value\", \"Absent\", 1, \"w-4\", \"h-4\", \"text-red-600\", \"bg-gray-100\", \"border-gray-300\", \"focus:ring-red-500\", 3, \"ngModelOptions\", \"ngModel\", \"id\", \"name\", \"ngModelChange\"]],\n  template: function AttEmpComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"table\", 1)(2, \"thead\", 2)(3, \"tr\")(4, \"th\", 3);\n      i0.ɵɵtext(5, \" ID \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"th\", 3);\n      i0.ɵɵtext(7, \" Photo \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"th\", 3);\n      i0.ɵɵtext(9, \" NOM D'EMPLOYEE \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\", 3);\n      i0.ɵɵtext(11, \" PROFESSION \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"th\", 3);\n      i0.ɵɵtext(13, \" Status \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(14, \"tbody\");\n      i0.ɵɵtemplate(15, AttEmpComponent_tr_15_Template, 24, 25, \"tr\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"div\", 5)(17, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function AttEmpComponent_Template_button_click_17_listener() {\n        return ctx.onAdd();\n      });\n      i0.ɵɵtext(18, \" Enregistrer \");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngForOf\", ctx.employees);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhdHQtZW1wLmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvYXR0LWVtcC9hdHQtZW1wLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLG9LQUFvSyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AttEmpComponent","constructor","Cla","att","userService","ngOnInit","getStudent","subscribe","data","employees","filter","user","role","console","log","onAdd","studentId","Object","keys","selectedStatus","status","attendanceData","iduser","createAttendance","response","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Mehdi\\Desktop\\Angular\\my-dashboard\\src\\app\\pages\\att-emp\\att-emp.component.html","C:\\Users\\Mehdi\\Desktop\\Angular\\my-dashboard\\src\\app\\pages\\att-emp\\att-emp.component.ts"],"sourcesContent":["\n\n\n\n<div  class=\"flex justify-center overflow-x-auto mt-4\">\n    <table class=\"w-92 text-sm text-left text-gray-500\">\n        <thead class=\"text-xs  text-black uppercase bg-slate-200 \">\n            <tr>\n                <th scope=\"col\" class=\"px-6 py-3\">\n                  ID\t\n                </th>\n                <th scope=\"col\" class=\"px-6 py-3\">\n                Photo\n                </th>\n                <th scope=\"col\" class=\"px-6 py-3\">\n                    NOM D'EMPLOYEE\n                </th>\n                <th scope=\"col\" class=\"px-6 py-3\">\n                    PROFESSION\n                </th>\n                <th scope=\"col\" class=\"px-6 py-3\">\n                Status\n                </th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr *ngFor=\"let employee of employees\"   class=\" border-b \">\n                <th scope=\"row\" class=\"px-6 py-4 font-medium  whitespace-nowrap text-black\">\n                   {{employee._id | slice:1:8}}\n                </th>\n                <td class=\"px-6 py-4\">\n                <img class=\"w-10 h-10 rounded-full\" src=\"assets/images/avatar.png\" alt=\"Rounded avatar\"/>\n                </td>\n                <td class=\"px-6 py-4\">\n                    {{employee.name}}\n                </td>\n                <td class=\"px-6 py-4\">\n                    {{employee.role}}\n                </td>\n                <td class=\"px-6 py-4\">\n                    \n<div class=\"flex\">\n    <div class=\"flex items-center mr-4\">\n        <input [ngModelOptions]=\"{ standalone: true }\"[(ngModel)]=\"selectedStatus[employee._id]\" id=\"{{ 'radio-' + employee._id }}\" type=\"radio\" value=\"Present\" name=\"{{ 'radio-group-' + employee._id }}\" class=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 \"/>\n        <label for=\"{{ 'radio-' + employee._id }}\" class=\"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300\">P</label>\n    </div>\n    <div class=\"flex items-center mr-4\">\n        <input [ngModelOptions]=\"{ standalone: true }\"[(ngModel)]=\"selectedStatus[employee._id]\" id=\"{{ 'radio-2-' + employee._id }}\" type=\"radio\" value=\"Late\" name=\"{{ 'radio-group-' + employee._id }}\" class=\"w-4 h-4 text-gray-600 bg-gray-100 border-gray-300 focus:ring-gray-500 dark:focus:ring-blue-600 \"/>\n        <label for=\"{{ 'radio-2-' + employee._id }}\" class=\"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300\">L</label>\n    </div>\n    <div class=\"flex items-center mr-4\">\n        <input  [ngModelOptions]=\"{ standalone: true }\"[(ngModel)]=\"selectedStatus[employee._id]\"  id=\"{{ 'radio-3-' + employee._id }}\" type=\"radio\" value=\"Absent\" name=\"{{ 'radio-group-' + employee._id }}\" class=\"w-4 h-4 text-red-600 bg-gray-100 border-gray-300 focus:ring-red-500 \"/>\n        <label for=\"{{ 'radio-3-' + employee._id }}\" class=\"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300\">A</label>\n    </div>\n    </div>  \n        </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n<div class=\"flex items-center justify-center mt-8\">\n    <button type=\"button\" (click)=\"onAdd()\" class=\"text-white bg-[#4285F4] hover:bg-[#4285F4]/90 focus:ring-4 focus:outline-none focus:ring-[#4285F4]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-[#4285F4]/55 mr-2 mb-2\">\n        Enregistrer\n      </button>\n</div>\n\n\n","import { Component, OnInit } from '@angular/core';\nimport { AttendanceService } from 'src/app/attendance.service';\nimport { ClasseService } from 'src/app/classe.service';\nimport { UserServiceService } from 'src/app/user-service.service';\nimport { IUser } from '../user';\n\n@Component({\n  selector: 'app-att-emp',\n  templateUrl: './att-emp.component.html',\n  styleUrls: ['./att-emp.component.css']\n})\nexport class AttEmpComponent implements OnInit {\n  employees: any[] = [];\n  selectedStatus: { [employeeId: string]: string } = {};\n  constructor(private Cla:ClasseService,private att:AttendanceService,private userService:UserServiceService){}\n  ngOnInit(): void {\n    this.userService.getStudent()\n\n  .subscribe((data: IUser[]) => {\n    // Filter users by role 'student'\n    this.employees = data.filter(user => user.role !== 'Student');\n    console.log(this.employees);\n    //this.filteredList=[...this.employees]\n  });\n  }\n  onAdd() {\n    // console.log('Before loop: selectedStatus', this.selectedStatus);\n \n for (const studentId of Object.keys(this.selectedStatus)) {\n \n   const status = this.selectedStatus[studentId];\n \n   // Now you can use studentId and status in your loop\n   //console.log(`Student ID: ${studentId}, Status: ${status}`);\n \n   // Check if both studentId and status are defined\n   if (studentId && status) {\n     // Create an attendance object based on the selected data\n     const attendanceData = {\n       iduser: studentId,\n       status: status,\n     };\n \n     //console.log('Sending attendanceData', attendanceData);\n \n     // Send the attendance data for this student\n     this.att.createAttendance(attendanceData).subscribe(response => {\n       // Handle the response from the API if needed\n       console.log('API response:', response);\n     });\n   } else {\n    // console.error('Both studentId and status must be provided for each student.');\n   }\n }\n \n //console.log('After loop');\n \n   }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}