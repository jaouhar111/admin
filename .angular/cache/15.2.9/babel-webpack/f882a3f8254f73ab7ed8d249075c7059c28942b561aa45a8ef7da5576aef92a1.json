{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/user-service.service\";\nimport * as i2 from \"src/app/attendance.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../classe-charts/classe-charts.component\";\nfunction HomeComponent_div_82_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52);\n    i0.ɵɵelement(1, \"img\", 53);\n    i0.ɵɵelementStart(2, \"h3\", 54);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r2.iduser.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2.iduser.role);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 3, item_r2.datenow));\n  }\n}\nfunction HomeComponent_div_104_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 52);\n    i0.ɵɵelement(1, \"img\", 53);\n    i0.ɵɵelementStart(2, \"h3\", 54);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r3.iduser.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r3.iduser.role);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 3, item_r3.datenow));\n  }\n}\nexport class HomeComponent {\n  constructor(userService, att) {\n    this.userService = userService;\n    this.att = att;\n    this.absentPercentage = 0;\n    this.students = [];\n    this.Teachers = [];\n    this.attemp = [];\n    this.attstu = [];\n  }\n  ngOnInit() {\n    this.getStudent();\n    this.getProf();\n    this.getattEmp();\n    this.getattStu();\n  }\n  getStudent() {\n    this.userService.getStudent().subscribe(data => {\n      // Filter users by role 'student'\n      this.students = data.filter(user => user.role === 'Student');\n    });\n  }\n  getProf() {\n    this.userService.getTeacher().subscribe(data => {\n      // Filter users by role 'student'\n      this.Teachers = data.filter(user => user.role !== 'Student');\n      //console.log(\"all teachers\"+JSON.stringify(this.Teachers));\n    });\n  }\n\n  getattEmp() {\n    const currentDate = new Date(); // Get the current date\n    this.att.getAllAttendance().subscribe(data => {\n      const uniqueNames = new Set();\n      // Filter users by status 'Present' and date matching the current date\n      this.attemp = data.filter(user => user.status === 'Present').filter(user => user.iduser.role !== 'Student').filter(user => {\n        // Convert the date from the data to a JavaScript Date object\n        const attendanceDate = new Date(user.datenow);\n        // Check if the date matches the current date\n        if (attendanceDate.getDate() === currentDate.getDate() && attendanceDate.getMonth() === currentDate.getMonth() && attendanceDate.getFullYear() === currentDate.getFullYear()) {\n          // Check if the name is not already in the Set\n          if (!uniqueNames.has(user.iduser.name)) {\n            // Add the name to the Set\n            uniqueNames.add(user.iduser.name);\n            return true;\n          }\n        }\n        return false;\n      });\n      // console.log(\"attendance employee\" + JSON.stringify(this.attemp));\n    });\n  }\n\n  getattStu() {\n    const currentDate = new Date(); // Get the current date\n    this.att.getAllAttendance().subscribe(data => {\n      const uniqueNames = new Set();\n      // Filter users by status 'Absent', role 'Student', and date matching the current date\n      this.attstu = data.filter(user => user.status === 'Absent').filter(user => user.iduser.role === 'Student').filter(user => {\n        // Convert the date from the data to a JavaScript Date object\n        const attendanceDate = new Date(user.datenow);\n        // Check if the date matches the current date\n        if (attendanceDate.getDate() === currentDate.getDate() && attendanceDate.getMonth() === currentDate.getMonth() && attendanceDate.getFullYear() === currentDate.getFullYear()) {\n          // Check if the name is not already in the Set\n          if (!uniqueNames.has(user.iduser.name)) {\n            // Add the name to the Set\n            uniqueNames.add(user.iduser.name);\n            return true;\n          }\n        }\n        return false;\n      });\n    });\n  }\n  calculateAbsentPercentage() {\n    // Calculate the percentage of absent students\n    if (this.students.length > 0) {\n      this.absentPercentage = this.attstu.length / this.students.length * 100;\n    } else {\n      this.absentPercentage = 0; // Handle cases where there are no students\n    }\n  }\n}\n_class = HomeComponent;\n_class.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.UserServiceService), i0.ɵɵdirectiveInject(i2.AttendanceService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-home\"]],\n  decls: 117,\n  vars: 6,\n  consts: [[1, \"grid\", \"lg:grid-cols-4\", \"gap-4\", \"mb-4\"], [1, \"flex\", \"flex-col\", \"h-40\", \"rounded-xl\", \"cursor-pointer\", \"bg-blue-900\"], [1, \"text-xl\", \"text-white\", \"pl-4\", \"pt-6\"], [1, \"flex\", \"justify-between\", \"px-6\", \"pt-2\"], [1, \"bi\", \"bi-mortarboard\", \"text-white\", \"text-3xl\"], [1, \"text-2xl\", \"text-white\"], [1, \"flex\", \"justify-between\", \"px-4\", \"pt-4\"], [1, \"text-white\", \"text-md\"], [1, \"text-md\", \"text-white\"], [1, \"flex\", \"flex-col\", \"h-40\", \"rounded-xl\", \"bg-purple-400\", \"dark:bg-gray-800\"], [1, \"text-xl\", \"text-white\", \"pl-4\", \"pt-6\", \"dark:text-gray-500\"], [1, \"bi\", \"bi-people\", \"text-white\", \"text-3xl\"], [1, \"flex\", \"flex-col\", \"h-40\", \"rounded-xl\", \"bg-pink-400\", \"dark:bg-gray-800\"], [1, \"bi\", \"bi-currency-dollar\", \"text-white\", \"text-3xl\"], [1, \"flex\", \"flex-col\", \"h-40\", \"rounded-xl\", \"bg-blue-400\", \"dark:bg-gray-800\"], [1, \"flex\", \"gap-4\", \"items-center\", \"justify-between\", \"lg:w-3/4\", \"sm:w-full\", \"px-4\", \"py-4\", \"h-44\", \"mb-4\", \"rounded-xl\", \"bg-red-300\"], [1, \"\"], [1, \"text-base\", \"text-white\", \"pb-4\"], [1, \"text-sm\", \"text-white\"], [\"src\", \"assets/images/university.png\", \"alt\", \"\", 1, \"object-cover\", \"h-24\", \"w-42\"], [1, \"grid\", \"lg:grid-cols-3\", \"sm:grid-cols-1\", \"gap-4\", \"mb-4\"], [1, \"flex\", \"items-center\", \"col-span-2\", \"justify-center\", \"rounded\", \"bg-gray-50\", \"h-44\", \"dark:bg-gray-800\"], [1, \"text-2xl\", \"text-gray-400\", \"dark:text-gray-500\"], [\"aria-hidden\", \"true\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 18 18\", 1, \"w-3.5\", \"h-3.5\"], [\"stroke\", \"currentColor\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M9 1v16M1 9h16\"], [1, \"flex\", \"items-center\", \"justify-center\", \"rounded\", \"bg-gray-50\", \"h-44\", \"dark:bg-gray-800\"], [1, \"flex\", \"items-center\", \"py-4\", \"col-span-2\", \"w-full\", \"justify-center\", \"rounded\", \"bg-gray-50\"], [1, \"flex\", \"items-center\", \"justify-center\", \"rounded-xl\", \"px-4\", \"bg-purple-400\", \"h-40\", \"dark:bg-gray-800\"], [1, \"text-sm\", \"text-white\", \"pb-4\", \"dark:text-gray-500\"], [1, \"text-sm\", \"text-white\", \"dark:text-gray-500\"], [1, \"grid\", \"lg:grid-cols-3\", \"sm:grid-cols-1\", \"gap-4\"], [1, \"flex\", \"flex-col\", \"px-4\", \"py-4\", \"col-span-2\", \"rounded-xl\", \"bg-gray-50\", \"max-h-40\"], [1, \"text-sm\", \"text-blue-500\"], [1, \"grid\", \"grid-cols-4\", \"gap-4\", \"overflow-y-auto\"], [\"class\", \"text-center text-gray-500\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"flex-col\", \"px-8\", \"py-2\", \"rounded-xl\", \"bg-gray-50\", \"h-40\"], [1, \"flex\", \"justify-between\"], [1, \"text-xs\", \"text-black-500\"], [1, \"w-full\", \"bg-gray-200\", \"rounded-full\", \"h-1.5\", \"mb-4\", \"dark:bg-gray-700\"], [1, \"bg-blue-400\", \"h-1.5\", \"rounded-full\", \"dark:bg-blue-500\"], [1, \"bg-pink-400\", \"h-1.5\", \"rounded-full\", \"dark:bg-blue-500\", 2, \"width\", \"45%\"], [1, \"bg-purple-400\", \"h-1.5\", \"rounded-full\", \"dark:bg-blue-500\", 2, \"width\", \"45%\"], [1, \"flex\", \"flex-col\", \"px-4\", \"py-4\", \"col-span-2\", \"rounded-xl\", \"bg-gray-50\", \"h-42\"], [1, \"flex\", \"items-center\", \"text-white\", \"justify-center\", \"rounded-xl\", \"px-4\", \"bg-gray-800\", \"h-40\"], [1, \"text-sm\", \"pb-4\"], [1, \"text-sm\"], [1, \"flex\", \"gap-4\", \"text-2xl\"], [1, \"bi\", \"bi-apple\"], [1, \"bi\", \"bi-microsoft\"], [1, \"flex\", \"items-center\", \"col-span-2\", \"text-white\", \"justify-center\", \"rounded-xl\", \"px-4\", \"h-42\"], [1, \"flex\", \"items-center\", \"text-white\", \"justify-center\", \"rounded-xl\", \"px-4\"], [\"inline-datepicker\", \"\", \"data-date\", \"02/25/2022\", 1, \"\"], [1, \"text-center\", \"text-gray-500\"], [\"src\", \"assets/images/avatar.png\", \"alt\", \"Bonnie Avatar\", 1, \"mx-auto\", \"mb-2\", \"w-10\", \"h-10\", \"rounded-full\"], [1, \"text-sm\", \"font-bold\", \"text-gray-900\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"p\", 2);\n      i0.ɵɵtext(3, \" Total Students \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3);\n      i0.ɵɵelement(5, \"i\", 4);\n      i0.ɵɵelementStart(6, \"p\", 5);\n      i0.ɵɵtext(7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 6)(9, \"p\", 7);\n      i0.ɵɵtext(10, \"Ce Mois\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"p\", 8);\n      i0.ɵɵtext(12, \"1\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"div\", 9)(14, \"p\", 10);\n      i0.ɵɵtext(15, \" Total Employees \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 3);\n      i0.ɵɵelement(17, \"i\", 11);\n      i0.ɵɵelementStart(18, \"p\", 5);\n      i0.ɵɵtext(19);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"div\", 6)(21, \"p\", 7);\n      i0.ɵɵtext(22, \"Ce Mois\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"p\", 8);\n      i0.ɵɵtext(24, \"1\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(25, \"div\", 12)(26, \"p\", 10);\n      i0.ɵɵtext(27, \" Revenue \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 3);\n      i0.ɵɵelement(29, \"i\", 13);\n      i0.ɵɵelementStart(30, \"p\", 5);\n      i0.ɵɵtext(31, \"1\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(32, \"div\", 6)(33, \"p\", 7);\n      i0.ɵɵtext(34, \"Ce Mois\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"p\", 8)(36, \"span\");\n      i0.ɵɵtext(37, \"$\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(38, \" 1\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(39, \"div\", 14)(40, \"p\", 10);\n      i0.ɵɵtext(41, \" Total Profites \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(42, \"div\", 3);\n      i0.ɵɵelement(43, \"i\", 13);\n      i0.ɵɵelementStart(44, \"p\", 5);\n      i0.ɵɵtext(45, \"1\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(46, \"div\", 6)(47, \"p\", 7);\n      i0.ɵɵtext(48, \"Ce Mois\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"p\", 8)(50, \"span\");\n      i0.ɵɵtext(51, \"$\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(52, \" 1\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(53, \"div\", 15)(54, \"div\", 16)(55, \"p\", 17);\n      i0.ɵɵtext(56, \" Welcome to Admin Dashboard \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"p\", 18);\n      i0.ɵɵtext(58, \" Your Account is Verified! Enjoy World's No.1 Education Software. \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(59, \"div\", 16);\n      i0.ɵɵelement(60, \"img\", 19);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(61, \"div\", 20)(62, \"div\", 21)(63, \"p\", 22);\n      i0.ɵɵnamespaceSVG();\n      i0.ɵɵelementStart(64, \"svg\", 23);\n      i0.ɵɵelement(65, \"path\", 24);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵnamespaceHTML();\n      i0.ɵɵelement(66, \"div\", 25);\n      i0.ɵɵelementStart(67, \"div\", 26);\n      i0.ɵɵelement(68, \"app-classe-charts\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(69, \"div\", 27)(70, \"div\", 16)(71, \"p\", 28);\n      i0.ɵɵtext(72, \" Free SMS Getaway \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(73, \"p\", 29);\n      i0.ɵɵtext(74, \" Send Unlimites Free SMS on Mobile numbers \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(75, \"div\", 16);\n      i0.ɵɵelement(76, \"img\", 19);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(77, \"div\", 30)(78, \"div\", 31)(79, \"p\", 32);\n      i0.ɵɵtext(80, \"Les Absence d'aujourd hui\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(81, \"div\", 33);\n      i0.ɵɵtemplate(82, HomeComponent_div_82_Template, 9, 5, \"div\", 34);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(83, \"div\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(84, \"div\", 35)(85, \"div\", 36)(86, \"p\", 37);\n      i0.ɵɵtext(87, \"Today Present Students\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(88, \"p\", 37);\n      i0.ɵɵtext(89, \"45%\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(90, \"div\", 38);\n      i0.ɵɵelement(91, \"div\", 39);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(92, \"p\", 37);\n      i0.ɵɵtext(93, \"Today Present Employees\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(94, \"div\", 38);\n      i0.ɵɵelement(95, \"div\", 40);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(96, \"p\", 37);\n      i0.ɵɵtext(97, \"This Month Fee Collection\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(98, \"div\", 38);\n      i0.ɵɵelement(99, \"div\", 41);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(100, \"div\", 42)(101, \"p\", 32);\n      i0.ɵɵtext(102, \"Employ\\u00E9s pr\\u00E9sents\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(103, \"div\", 33);\n      i0.ɵɵtemplate(104, HomeComponent_div_104_Template, 9, 5, \"div\", 34);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(105, \"div\", 43)(106, \"div\", 16)(107, \"p\", 44);\n      i0.ɵɵtext(108, \" Desktop Version \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(109, \"p\", 45);\n      i0.ɵɵtext(110, \" Download and Install App on your PC \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(111, \"div\", 46);\n      i0.ɵɵelement(112, \"i\", 47)(113, \"i\", 48);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(114, \"div\", 49);\n      i0.ɵɵelementStart(115, \"div\", 50);\n      i0.ɵɵelement(116, \"div\", 51);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵtextInterpolate(ctx.students.length);\n      i0.ɵɵadvance(12);\n      i0.ɵɵtextInterpolate(ctx.Teachers.length);\n      i0.ɵɵadvance(63);\n      i0.ɵɵproperty(\"ngForOf\", ctx.attstu);\n      i0.ɵɵadvance(9);\n      i0.ɵɵstyleProp(\"width\", ctx.calculateAbsentPercentage(), \"%\");\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.attemp);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.ClasseChartsComponent, i3.DatePipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJob21lLmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvaG9tZS9ob21lLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLGdLQUFnSyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","HomeComponent","constructor","userService","att","ngOnInit","getStudent","getProf","getattEmp","getattStu","subscribe","data","students","filter","user","role","getTeacher","Teachers","currentDate","Date","getAllAttendance","uniqueNames","Set","attemp","status","iduser","attendanceDate","datenow","getDate","getMonth","getFullYear","has","name","add","attstu","calculateAbsentPercentage","length","absentPercentage","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Mehdi\\Desktop\\Angular\\my-dashboard\\src\\app\\pages\\home\\home.component.html","C:\\Users\\Mehdi\\Desktop\\Angular\\my-dashboard\\src\\app\\pages\\home\\home.component.ts"],"sourcesContent":["\n  \n  \n        <div class=\"grid lg:grid-cols-4 gap-4 mb-4\">\n            <div class=\"flex flex-col h-40 rounded-xl cursor-pointer bg-blue-900\">\n                <p class=\"text-xl text-white pl-4 pt-6 \">\n                      Total Students\n                   </p>\n                   <div class=\"flex justify-between px-6 pt-2\">\n                    <i class=\"bi bi-mortarboard text-white text-3xl\"></i>\n                       \n                       <p class=\"text-2xl text-white\">{{students.length}}</p>\n                   </div>\n                   <div class=\"flex justify-between px-4 pt-4\">\n                       <p class=\"text-white text-md\">Ce Mois</p>\n                       <p class=\"text-md text-white\">1</p>\n                   </div>\n                </div>\n                <div class=\"flex flex-col  h-40  rounded-xl bg-purple-400 dark:bg-gray-800\">\n                    <p class=\"text-xl text-white pl-4 pt-6 dark:text-gray-500\">\n                          Total Employees\n                       </p>\n                       <div class=\"flex justify-between px-6 pt-2\">\n                        <i class=\"bi bi-people text-white text-3xl\"></i>\n                           \n                           <p class=\"text-2xl text-white\">{{Teachers.length}}</p>\n                       </div>\n                       <div class=\"flex justify-between px-4 pt-4\">\n                           <p class=\"text-white text-md\">Ce Mois</p>\n                           <p class=\"text-md text-white\">1</p>\n                       </div>\n                    </div>\n                    <div class=\"flex flex-col  h-40  rounded-xl bg-pink-400 dark:bg-gray-800\">\n                    <p class=\"text-xl text-white pl-4 pt-6 dark:text-gray-500\">\n                          Revenue\n                       </p>\n                       <div class=\"flex justify-between px-6 pt-2\">\n                        <i class=\"bi bi-currency-dollar text-white text-3xl\"></i>\n                           \n                           <p class=\"text-2xl text-white\">1</p>\n                       </div>\n                       <div class=\"flex justify-between px-4 pt-4\">\n                           <p class=\"text-white text-md\">Ce Mois</p>\n                           <p class=\"text-md text-white\"><span>$</span> 1</p>\n                       </div>\n                    </div>\n                    <div class=\"flex flex-col  h-40  rounded-xl bg-blue-400 dark:bg-gray-800\">\n                    <p class=\"text-xl text-white pl-4 pt-6 dark:text-gray-500\">\n                          Total Profites\n                       </p>\n                       <div class=\"flex justify-between px-6 pt-2\">\n                        <i class=\"bi bi-currency-dollar text-white text-3xl\"></i>\n                           <p class=\"text-2xl text-white\">1</p>\n                       </div>\n                       <div class=\"flex justify-between px-4 pt-4\">\n                           <p class=\"text-white text-md\">Ce Mois</p>\n                           <p class=\"text-md text-white\"><span>$</span> 1</p>\n                       </div>\n                    </div>\n           \n           \n        </div>\n        <div class=\"flex gap-4 items-center justify-between lg:w-3/4 sm:w-full px-4 py-4 h-44 mb-4 rounded-xl bg-red-300\">\n         <div class=''>\n            <p class=\"text-base text-white pb-4 \">\n               Welcome to Admin Dashboard\n            </p>\n            <p class=\"text-sm text-white \">\n               Your Account is Verified! Enjoy World's No.1 Education Software.\n            </p>\n            </div>\n            <div class=''>\n            <img src=\"assets/images/university.png\" alt=\"\" class=\"object-cover h-24 w-42 \" />\n            </div>\n         </div>\n        <div class=\"grid lg:grid-cols-3 sm:grid-cols-1 gap-4 mb-4\">\n           <div class=\"flex items-center col-span-2 justify-center rounded bg-gray-50 h-44 dark:bg-gray-800\">\n              <p class=\"text-2xl text-gray-400 dark:text-gray-500\">\n                 <svg class=\"w-3.5 h-3.5\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 18 18\">\n                    <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 1v16M1 9h16\"/>\n                 </svg>\n              </p>\n           </div>\n           <div class=\"flex items-center justify-center rounded bg-gray-50 h-44 dark:bg-gray-800\">\n            \n            \n               \n\n\n\n           </div>\n           <div class=\"flex items-center py-4 col-span-2 w-full justify-center rounded bg-gray-50  \">\n            <app-classe-charts></app-classe-charts>\n           </div>\n           <div class=\"flex items-center justify-center rounded-xl px-4 bg-purple-400 h-40 dark:bg-gray-800\">\n            <div class=''>\n               <p class=\"text-sm text-white pb-4 dark:text-gray-500\">\n                  Free SMS Getaway\n               </p>\n               <p class=\"text-sm text-white dark:text-gray-500\">\n                  Send Unlimites Free SMS on Mobile numbers \n               </p>\n               </div>\n               <div class=''>\n               <img src=\"assets/images/university.png\" alt=\"\" class=\"object-cover h-24 w-42 \" />\n               </div>\n           </div>\n        </div>\n        \n        <div class=\"grid lg:grid-cols-3 sm:grid-cols-1 gap-4\">\n           <div class=\"flex flex-col px-4 py-4 col-span-2  rounded-xl bg-gray-50 max-h-40 \">\n            <p class='text-sm text-blue-500'>Les Absence d'aujourd hui</p>\n            <div class=\"grid grid-cols-4 gap-4 overflow-y-auto\">\n               <div *ngFor=\"let item of attstu\" class=\"text-center text-gray-500\">\n                  <img class=\"mx-auto mb-2 w-10 h-10 rounded-full\" src=\"assets/images/avatar.png\" alt=\"Bonnie Avatar\">\n                  <h3 class=\"text-sm font-bold  text-gray-900 \">{{item.iduser.name}}</h3>\n                  <p>{{item.iduser.role}}</p>\n                  <p>{{item.datenow | date}}</p>\n              </div>\n            </div>\n            <div>\n            </div>\n           </div>\n           <div class=\"flex flex-col px-8 py-2 rounded-xl bg-gray-50 h-40\">\n            <div class=\"flex justify-between\">\n               <p class='text-xs text-black-500'>Today Present Students</p>\n               <p class='text-xs text-black-500'>45%</p>\n            </div>\n             \n            <div class=\"w-full bg-gray-200 rounded-full h-1.5 mb-4 dark:bg-gray-700\">\n               <div class=\"bg-blue-400 h-1.5 rounded-full dark:bg-blue-500\" [style.width.%]=\"calculateAbsentPercentage()\"></div>\n             </div>\n             <p class='text-xs text-black-500'>Today Present Employees</p>\n            <div class=\"w-full bg-gray-200 rounded-full h-1.5 mb-4 dark:bg-gray-700\">\n               <div class=\"bg-pink-400 h-1.5 rounded-full dark:bg-blue-500\" style=\"width: 45%\"></div>\n             </div>\n             <p class='text-xs text-black-500'>This Month Fee Collection</p>\n            <div class=\"w-full bg-gray-200 rounded-full h-1.5 mb-4 dark:bg-gray-700\">\n               <div class=\"bg-purple-400 h-1.5 rounded-full dark:bg-blue-500\" style=\"width: 45%\"></div>\n             </div>\n             \n            \n           </div>\n           <div class=\"flex flex-col px-4 py-4 col-span-2  rounded-xl bg-gray-50 h-42 \">\n            <p class='text-sm text-blue-500'>Employés présents</p>\n            <div   class=\"grid grid-cols-4 gap-4 overflow-y-auto\">\n               \n                  <div *ngFor=\"let item of attemp\" class=\"text-center text-gray-500\">\n                     <img class=\"mx-auto mb-2 w-10 h-10 rounded-full\" src=\"assets/images/avatar.png\" alt=\"Bonnie Avatar\">\n                     <h3 class=\"text-sm font-bold  text-gray-900 \">{{item.iduser.name}}</h3>\n                     <p>{{item.iduser.role}}</p>\n                     <p>{{item.datenow | date}}</p>\n                 </div>\n              \n            </div>\n           </div>\n           <div class=\"flex items-center text-white justify-center rounded-xl px-4 bg-gray-800 h-40\">\n            <div class=''>\n               <p class=\"text-sm  pb-4 \">\n                  Desktop Version\n               </p>\n               <p class=\"text-sm  \">\n                  Download and Install App on your PC\n               </p>\n               </div>\n               <div class='flex gap-4 text-2xl'>\n                  <i class=\"bi bi-apple\"></i>\n                  <i class=\"bi bi-microsoft\"></i>\n               </div>\n           </div>\n           <div class=\"flex items-center col-span-2 text-white justify-center rounded-xl px-4  h-42\">\n            \n           </div>\n           <div class=\"flex items-center text-white justify-center rounded-xl px-4 \">\n            <div inline-datepicker data-date=\"02/25/2022\" class=\"\"></div>\n           </div>\n        </div>\n    ","import { Component, OnInit } from '@angular/core';\nimport { UserServiceService } from 'src/app/user-service.service';\nimport { IUser, IAttendance } from '../user';\nimport { AttendanceService } from 'src/app/attendance.service';\n\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit {\n  absentPercentage: number = 0;\n  students: IUser[] = [];\n  Teachers: any[] = [];\n  attemp:IAttendance[]=[];\n  attstu:IAttendance[]=[];\n  constructor(private userService:UserServiceService,private att:AttendanceService){}\n  ngOnInit(): void {\n    \n    this.getStudent();\n    this.getProf();\n    this.getattEmp();\n    this.getattStu();\n    \n     \n    \n  }\n  getStudent(){\n    this.userService.getStudent()\n  .subscribe((data: IUser[]) => {\n    // Filter users by role 'student'\n    this.students = data.filter(user => user.role === 'Student');\n    \n  });\n  }\n\n  getProf(){\n    this.userService.getTeacher()\n    .subscribe((data: IUser[]) => {\n      // Filter users by role 'student'\n      this.Teachers = data.filter(user => user.role !== 'Student');\n      //console.log(\"all teachers\"+JSON.stringify(this.Teachers));\n      \n\n    });\n  }\n\n  getattEmp() {\n    const currentDate = new Date(); // Get the current date\n  \n    this.att.getAllAttendance()\n      .subscribe((data: IAttendance[]) => {\n        const uniqueNames = new Set<string>();\n  \n        // Filter users by status 'Present' and date matching the current date\n        this.attemp = data\n          .filter(user => user.status === 'Present')\n          .filter(user => user.iduser.role !== 'Student')\n          .filter(user => {\n            // Convert the date from the data to a JavaScript Date object\n            const attendanceDate = new Date(user.datenow);\n  \n            // Check if the date matches the current date\n            if (\n              attendanceDate.getDate() === currentDate.getDate() &&\n              attendanceDate.getMonth() === currentDate.getMonth() &&\n              attendanceDate.getFullYear() === currentDate.getFullYear()\n            ) {\n              // Check if the name is not already in the Set\n              if (!uniqueNames.has(user.iduser.name)) {\n                // Add the name to the Set\n                uniqueNames.add(user.iduser.name);\n                return true;\n              }\n            }\n            return false;\n          });\n  \n        // console.log(\"attendance employee\" + JSON.stringify(this.attemp));\n      });\n  }\n  \n  getattStu() {\n    const currentDate = new Date(); // Get the current date\n  \n    this.att.getAllAttendance()\n      .subscribe((data: IAttendance[]) => {\n        const uniqueNames = new Set<string>();\n  \n        // Filter users by status 'Absent', role 'Student', and date matching the current date\n        this.attstu = data\n          .filter(user => user.status === 'Absent')\n          .filter(user => user.iduser.role === 'Student')\n          .filter(user => {\n            // Convert the date from the data to a JavaScript Date object\n            const attendanceDate = new Date(user.datenow);\n  \n            // Check if the date matches the current date\n            if (\n              attendanceDate.getDate() === currentDate.getDate() &&\n              attendanceDate.getMonth() === currentDate.getMonth() &&\n              attendanceDate.getFullYear() === currentDate.getFullYear()\n            ) {\n              // Check if the name is not already in the Set\n              if (!uniqueNames.has(user.iduser.name)) {\n                // Add the name to the Set\n                uniqueNames.add(user.iduser.name);\n                return true;\n              }\n            }\n            return false;\n          });\n  \n        \n      });\n  }\n  \n\n  calculateAbsentPercentage() {\n    // Calculate the percentage of absent students\n    if (this.students.length > 0) {\n      this.absentPercentage = (this.attstu.length / this.students.length) * 100;\n    } else {\n      this.absentPercentage = 0; // Handle cases where there are no students\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}