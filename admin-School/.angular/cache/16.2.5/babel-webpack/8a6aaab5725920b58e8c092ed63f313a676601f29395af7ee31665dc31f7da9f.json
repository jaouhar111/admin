{"ast":null,"code":"import { BehaviorSubject, catchError, tap, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class MatiereService {\n  constructor(http) {\n    this.http = http;\n    this.matieres = new BehaviorSubject([]);\n    this.matieres$ = this.matieres.asObservable();\n    this.url = \"http://localhost:9000/api/matiere\";\n  }\n  ajMatiere(matiereData) {\n    // Return the full HTTP response with the created student data\n    return this.http.post(this.url, matiereData, {\n      observe: 'response'\n    }).pipe(tap(addedMatier => {\n      const currentClasses = this.matieres.getValue();\n      currentClasses.push(addedMatier);\n      this.matieres.next(currentClasses);\n      //console.log(addedClass);\n      //console.log(currentClasses);\n      //console.log(this.classes);\n    }), catchError(this.handleError));\n  }\n  handleError(error) {\n    if (error.status === 0) {\n      // A client-side or network error occurred. Handle it accordingly.\n      console.error('An error occurred:', error.error);\n    } else {\n      // The backend returned an unsuccessful response code.\n      // The response body may contain clues as to what went wrong.\n      console.error(`Backend returned code ${error.status}, body was: `, error.error);\n    }\n    // Return an observable with a user-facing error message.\n    return throwError(() => new Error('Something bad happened; please try again later.'));\n  }\n  getMatiere(id) {\n    return this.http.get('http://localhost:9000/api/matiere/' + id).pipe(\n    //tap(matiere=>console.log(\"matiere\",matiere)),\n    catchError(this.handleError));\n  }\n  deleteMatiereById(id) {\n    const url = `http://localhost:9000/api/matiere/${id}`; // Replace with your API endpoint\n    return this.http.delete(url);\n  }\n  updateMatiere(matierId, updatedMatierData) {\n    // Make an HTTP PUT or PATCH request to update the matier by ID\n    return this.http.put(`${this.url}/${matierId}`, updatedMatierData);\n  }\n  static #_ = this.ɵfac = function MatiereService_Factory(t) {\n    return new (t || MatiereService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: MatiereService,\n    factory: MatiereService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["BehaviorSubject","catchError","tap","throwError","MatiereService","constructor","http","matieres","matieres$","asObservable","url","ajMatiere","matiereData","post","observe","pipe","addedMatier","currentClasses","getValue","push","next","handleError","error","status","console","Error","getMatiere","id","get","deleteMatiereById","delete","updateMatiere","matierId","updatedMatierData","put","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Mehdi\\Desktop\\Angular\\admin-School\\src\\app\\matiere.service.ts"],"sourcesContent":["import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, catchError, tap, throwError } from 'rxjs';\nimport { IMatiere } from 'src/models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MatiereService {\n  matieres: BehaviorSubject<any[]> = new BehaviorSubject<any[]>([]);\n  matieres$: Observable<any[]> = this.matieres.asObservable();\n  private readonly url=\"http://localhost:9000/api/matiere\";\n  \n  constructor(private http:HttpClient) { }\n  ajMatiere(matiereData:IMatiere): Observable<any> {\n    \n\n    // Return the full HTTP response with the created student data\n    return this.http.post(this.url, matiereData, { observe: 'response' }).pipe(\n      \n      tap((addedMatier) => {\n        const currentClasses = this.matieres.getValue();\n        currentClasses.push(addedMatier);\n        this.matieres.next(currentClasses);\n        //console.log(addedClass);\n        //console.log(currentClasses);\n        //console.log(this.classes);\n      }),\n      catchError(this.handleError)\n    );\n  }\n  private handleError(error: HttpErrorResponse) {\n    if (error.status === 0) {\n      // A client-side or network error occurred. Handle it accordingly.\n      console.error('An error occurred:', error.error);\n    } else {\n      // The backend returned an unsuccessful response code.\n      // The response body may contain clues as to what went wrong.\n      console.error(\n        `Backend returned code ${error.status}, body was: `, error.error);\n    }\n    // Return an observable with a user-facing error message.\n    return throwError(() => new Error('Something bad happened; please try again later.'));\n  }\n  public getMatiere(id:String):Observable<any>\n  {\n    return this.http.get('http://localhost:9000/api/matiere/'+id).pipe(\n        //tap(matiere=>console.log(\"matiere\",matiere)),\n        catchError(this.handleError)\n    );\n  }\n\n  deleteMatiereById(id: string): Observable<any> {\n    const url = `http://localhost:9000/api/matiere/${id}`; // Replace with your API endpoint\n    return this.http.delete(url);\n  }\n  updateMatiere(matierId: string, updatedMatierData: any): Observable<any> {\n    // Make an HTTP PUT or PATCH request to update the matier by ID\n    return this.http.put(`${this.url}/${matierId}`, updatedMatierData)\n  }\n}\n"],"mappings":"AAEA,SAASA,eAAe,EAAcC,UAAU,EAAEC,GAAG,EAAEC,UAAU,QAAQ,MAAM;;;AAM/E,OAAM,MAAOC,cAAc;EAKzBC,YAAoBC,IAAe;IAAf,KAAAA,IAAI,GAAJA,IAAI;IAJxB,KAAAC,QAAQ,GAA2B,IAAIP,eAAe,CAAQ,EAAE,CAAC;IACjE,KAAAQ,SAAS,GAAsB,IAAI,CAACD,QAAQ,CAACE,YAAY,EAAE;IAC1C,KAAAC,GAAG,GAAC,mCAAmC;EAEjB;EACvCC,SAASA,CAACC,WAAoB;IAG5B;IACA,OAAO,IAAI,CAACN,IAAI,CAACO,IAAI,CAAC,IAAI,CAACH,GAAG,EAAEE,WAAW,EAAE;MAAEE,OAAO,EAAE;IAAU,CAAE,CAAC,CAACC,IAAI,CAExEb,GAAG,CAAEc,WAAW,IAAI;MAClB,MAAMC,cAAc,GAAG,IAAI,CAACV,QAAQ,CAACW,QAAQ,EAAE;MAC/CD,cAAc,CAACE,IAAI,CAACH,WAAW,CAAC;MAChC,IAAI,CAACT,QAAQ,CAACa,IAAI,CAACH,cAAc,CAAC;MAClC;MACA;MACA;IACF,CAAC,CAAC,EACFhB,UAAU,CAAC,IAAI,CAACoB,WAAW,CAAC,CAC7B;EACH;EACQA,WAAWA,CAACC,KAAwB;IAC1C,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;MACtB;MACAC,OAAO,CAACF,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAACA,KAAK,CAAC;KACjD,MAAM;MACL;MACA;MACAE,OAAO,CAACF,KAAK,CACX,yBAAyBA,KAAK,CAACC,MAAM,cAAc,EAAED,KAAK,CAACA,KAAK,CAAC;;IAErE;IACA,OAAOnB,UAAU,CAAC,MAAM,IAAIsB,KAAK,CAAC,iDAAiD,CAAC,CAAC;EACvF;EACOC,UAAUA,CAACC,EAAS;IAEzB,OAAO,IAAI,CAACrB,IAAI,CAACsB,GAAG,CAAC,oCAAoC,GAACD,EAAE,CAAC,CAACZ,IAAI;IAC9D;IACAd,UAAU,CAAC,IAAI,CAACoB,WAAW,CAAC,CAC/B;EACH;EAEAQ,iBAAiBA,CAACF,EAAU;IAC1B,MAAMjB,GAAG,GAAG,qCAAqCiB,EAAE,EAAE,CAAC,CAAC;IACvD,OAAO,IAAI,CAACrB,IAAI,CAACwB,MAAM,CAACpB,GAAG,CAAC;EAC9B;EACAqB,aAAaA,CAACC,QAAgB,EAAEC,iBAAsB;IACpD;IACA,OAAO,IAAI,CAAC3B,IAAI,CAAC4B,GAAG,CAAC,GAAG,IAAI,CAACxB,GAAG,IAAIsB,QAAQ,EAAE,EAAEC,iBAAiB,CAAC;EACpE;EAAC,QAAAE,CAAA,G;qBAnDU/B,cAAc,EAAAgC,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAdpC,cAAc;IAAAqC,OAAA,EAAdrC,cAAc,CAAAsC,IAAA;IAAAC,UAAA,EAFb;EAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}