{"ast":null,"code":"import { BehaviorSubject, catchError, tap, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ClasseroomService {\n  constructor(http) {\n    this.http = http;\n    this.classes = new BehaviorSubject([]);\n    this.classes$ = this.classes.asObservable();\n    this.url = \"http://localhost:9000/api/classes\";\n  }\n  getClasse() {\n    return this.http.get(this.url).pipe(tap(classe => {}), catchError(this.handleError));\n  }\n  handleError(error) {\n    if (error.status === 0) {\n      // A client-side or network error occurred. Handle it accordingly.\n      console.error('An error occurred:', error.error);\n    } else {\n      // The backend returned an unsuccessful response code.\n      // The response body may contain clues as to what went wrong.\n      console.error(`Backend returned code ${error.status}, body was: `, error.error);\n    }\n    // Return an observable with a user-facing error message.\n    return throwError(() => new Error('Something bad happened; please try again later.'));\n  }\n  deleteClasse(id) {\n    // Make an HTTP DELETE request to delete the class by ID\n    return this.http.delete(`${this.url}/${id}`).pipe(tap(() => {\n      // Update the classes list by removing the deleted class\n      const currentClasses = this.classes.getValue();\n      const updatedClasses = currentClasses.filter(classe => classe.id !== id);\n      this.classes.next(updatedClasses);\n    }), catchError(this.handleError));\n  }\n  updateClassroomAndAddMatiere(classroomId, matiereId) {\n    const requestBody = {\n      matiereId\n    };\n    return this.http.patch(`${this.url}/${classroomId}`, requestBody);\n  }\n  ajClasse(name, prof) {\n    const newClass = {\n      name,\n      prof\n    };\n    return this.http.post(this.url, newClass).pipe(tap(addedClass => {\n      const currentClasses = this.classes.getValue();\n      currentClasses.push(addedClass);\n      this.classes.next(currentClasses);\n      console.log(addedClass);\n      console.log(currentClasses);\n      //console.log(this.classes);\n    }), catchError(this.handleError));\n  }\n  updateClasseroom(classroomId, students) {\n    const requestBody = {\n      students\n    };\n    // Make a PUT request to the updated classroom update API endpoint\n    return this.http.put(\"http://localhost:9000/api/classes/\" + classroomId, requestBody);\n  }\n  static #_ = this.ɵfac = function ClasseroomService_Factory(t) {\n    return new (t || ClasseroomService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ClasseroomService,\n    factory: ClasseroomService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["BehaviorSubject","catchError","tap","throwError","ClasseroomService","constructor","http","classes","classes$","asObservable","url","getClasse","get","pipe","classe","handleError","error","status","console","Error","deleteClasse","id","delete","currentClasses","getValue","updatedClasses","filter","next","updateClassroomAndAddMatiere","classroomId","matiereId","requestBody","patch","ajClasse","name","prof","newClass","post","addedClass","push","log","updateClasseroom","students","put","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Mehdi\\Desktop\\Angular\\admin-School\\src\\app\\classeroom.service.ts"],"sourcesContent":["import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, catchError, tap, throwError } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ClasseroomService {\n  classes: BehaviorSubject<any[]> = new BehaviorSubject<any[]>([]);\n  classes$: Observable<any[]> = this.classes.asObservable();\n  private readonly url=\"http://localhost:9000/api/classes\";\n  constructor(private http:HttpClient) { \n    \n  }\n\n  public getClasse():Observable<any>\n  {\n    return this.http.get(this.url).pipe(\n      tap((classe:any) => {\n        \n        \n      }),\n      catchError(this.handleError)\n    );\n  }\n  private handleError(error: HttpErrorResponse) {\n    if (error.status === 0) {\n      // A client-side or network error occurred. Handle it accordingly.\n      console.error('An error occurred:', error.error);\n    } else {\n      // The backend returned an unsuccessful response code.\n      // The response body may contain clues as to what went wrong.\n      console.error(\n        `Backend returned code ${error.status}, body was: `, error.error);\n    }\n    // Return an observable with a user-facing error message.\n    return throwError(() => new Error('Something bad happened; please try again later.'));\n  }\n\n  deleteClasse(id: string): Observable<any> {\n    // Make an HTTP DELETE request to delete the class by ID\n    return this.http.delete(`${this.url}/${id}`).pipe(\n      tap(() => {\n        // Update the classes list by removing the deleted class\n        const currentClasses = this.classes.getValue();\n        const updatedClasses = currentClasses.filter((classe) => classe.id !== id);\n        this.classes.next(updatedClasses);\n      }),\n      catchError(this.handleError)\n    );\n  }\n  updateClassroomAndAddMatiere(classroomId: String, matiereId: String): Observable<any> {\n    \n    const requestBody = { matiereId };\n    return this.http.patch(`${this.url}/${classroomId}`, requestBody);\n  }\n\n  \n  public ajClasse(name: String, prof:String):Observable<any>{\n    \n    const newClass = { name, prof };\n\n    return this.http.post(this.url, newClass).pipe(\n      tap((addedClass) => {\n        const currentClasses = this.classes.getValue();\n        currentClasses.push(addedClass);\n        this.classes.next(currentClasses);\n        console.log(addedClass);\n        console.log(currentClasses);\n        //console.log(this.classes);\n      }),\n      catchError(this.handleError)\n    );\n  }\n\n  updateClasseroom(classroomId: String, students: String): Observable<any> {\n    const requestBody = { students };\n\n    // Make a PUT request to the updated classroom update API endpoint\n    return this.http.put(\"http://localhost:9000/api/classes/\"+classroomId, requestBody);\n    \n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}